### 19 Docker: основы работы с контейнеризацией 

####  Цели задания:
Критерии оценки:

1) Создан свой кастомный образ nginx на базе alpine.
2) После запуска nginx должен отдавать кастомную страницу (достаточно изменить дефолтную страницу nginx).
3) Определена разница между контейнером и образом, написан вывод.
4) Написан ответ на вопрос: Можно ли в контейнере собрать ядро?
5) Собранный образ запушин в docker hub и дана ссылку на репозиторий.

#### Решение:

1) Ну чтож начнем. 

Для этолго задания мы пойдем следующим путем - Создадим Вируальную Машину на Proxmox c  помощью ansible и потом выполнима все действия на ней. Для этого мы выполним:

```bash

ansible-playbook Create_vm.yml --ask-vault-pass

```
После этого ansible потребует пароль от зашифрованного файла secrets.yml  содержаший чувствительную информацию  ( учетные данные для подключения к системам ),
После введения правильного пароля проиходйет выполнение  списка задач для выполеннеия конфигурирования Виртуальной машины

```bash

PLAY [Creeate vms on Proxmox] *****************************************************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: Host 'pve' is using the discovered Python interpreter at '/usr/bin/python3.11', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/devel/reference_appendices/interpreter_discovery.html for more information.
ok: [pve]

TASK [Install python] *************************************************************************************************************************************************************************************************************************************************************************************************
ok: [pve]

TASK [INstall pip modules] ********************************************************************************************************************************************************************************************************************************************************************************************
ok: [pve]

TASK [Install pip modules] ********************************************************************************************************************************************************************************************************************************************************************************************
ok: [pve]

TASK [Install pip modules] ********************************************************************************************************************************************************************************************************************************************************************************************
ok: [pve]

TASK [clone KVM VM 1 from template] ***********************************************************************************************************************************************************************************************************************************************************************************
changed: [pve]

TASK [Start VM] *******************************************************************************************************************************************************************************************************************************************************************************************************
changed: [pve] => (item={'name_of_vm': 'my-vm3'})

PLAY RECAP ************************************************************************************************************************************************************************************************************************************************************************************************************
pve                        : ok=7    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

Далее мы запустим 

```bash
ansible-playbook Config_vm --ask-vault-pass
```
Что в свою очередь выполнит установку необходимого набора софта ( docker ), а так же действия необюходимые  для  создания кастомного докер контейнера.

```bash

PLAY [install  & config Docker] ***************************************************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: Host 'my-vm1' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/devel/reference_appendices/interpreter_discovery.html for more information.
ok: [my-vm1]

TASK [Update apt package cache] ***************************************************************************************************************************************************************************************************************************************************************************************
changed: [my-vm1]

TASK [Install dependencies] *******************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Add Docker GPG key] *********************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Add Docker APT repository] **************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Update apt package cache (again)] *******************************************************************************************************************************************************************************************************************************************************************************
changed: [my-vm1]

TASK [Install Docker] *************************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Add user to the docker group] ***********************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Start Docker service] *******************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Copy  flise for custom image to /tmp/remote_destination'] *******************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Build Custom Image] *********************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Запуск Docker-контейнера] ***************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Login to Docker Hub] ********************************************************************************************************************************************************************************************************************************************************************************************
ok: [my-vm1]

TASK [Tag local Docker image for Docker Hub] **************************************************************************************************************************************************************************************************************************************************************************
changed: [my-vm1]

TASK [Push Docker image to Docker Hub] ********************************************************************************************************************************************************************************************************************************************************************************
changed: [my-vm1]

PLAY RECAP ************************************************************************************************************************************************************************************************************************************************************************************************************
my-vm1                     : ok=15   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

```

Поссле данных  манипуляций в Docker hub  появится кастомное обрваз
ссылка на образ 
<br> docker pull jecka21/jecka21 </br>